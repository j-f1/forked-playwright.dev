---
title: Qwik Case Study
---

import {Profile, ProfileLayout}  from '@site/src/components/CaseStudiesProfile';

[Qwik](https://qwik.builder.io/) is a new kind of web framework that can deliver instant loading web applications at any size or complexity.

<ProfileLayout>
  <Profile name="MiÅ¡ko Hevery" description="Creator of AngularJS" twitterUrl="https://twitter.com/mhevery" imageUrl="https://pbs.twimg.com/profile_images/1389683812968194049/MhsEUijj_400x400.jpg"/>
  <Profile name="Manu Almeida" description="Creator of Gin and Stencil" twitterUrl='https://twitter.com/manucorporat' imageUrl="https://pbs.twimg.com/profile_images/1579463292115996673/aYixU-64_400x400.jpg" />
  <Profile name="Adam Bradley" description="Creator of Ionic and Stencil" twitterUrl='https://twitter.com/adamdbradley' imageUrl="https://pbs.twimg.com/profile_images/909075942320025600/hfYqicUk_400x400.jpg" />
</ProfileLayout>

## Why Playwright

We have some experience trying to do what playwright does when previously working for [Stencil](https://getstencil.com/). Before Playwright existed we created a similar tool on top of Puppeteer. It's such a tough thing to do. It's the the kind of thing you think is easy to do and the moment you start to do it, it is extremely complicated, especially to be a good end to end testing framework. 

With stencil, we pretty much built the same thing on top of Puppeteer, and I think that's why when Playwright came out, it was just like, oh, this is perfect because, I think what's different is that it had testing first and foremost. And that's what was important to us and what we actually use it for.

We were previously using puppeteer to test, so the fact that with Playwright you just NPM install, import the assert library and it just worked. That was the part that blew our minds. It was so much nicer especially in comparison to all the other testing suites that try to integrate Puppeteer. You have to learn how to get set up, get all the correct tooling wired together, get all the watches, etc. There was so much to do to try to hard code two different testing libraries together and it was always a challenge. But with Playwright all you have to do is [import the testing library](/docs/intro) and it just works. That was the big aha moment for us because now we didn't have to figure out any of that stuff which is something  we didn't want to have to figure out. We just wanted to use it.


## How we use Playwright

We have a total of 56 tests but some or our tests do a lot of things. Then we have more tests for [Qwik City](https://qwik.builder.io/qwikcity/overview/), an opinionated file-based router, where we test the loading of the page, clicking buttons and then lots of asserts inside of them.

#### End to End Testing of Qwik

Playwright powers the whole end to end testing of of Qwik, which is not to test an app itself but to test all the things that the framework needs to solve, the internals of all the coordinate cases of what can happen. Some of these things are very hard to test as a unit test and we believe the value of unit tests is very low because at the end of the day our code is evolving. In Qwik we are at the stage where we prioritize end to end tests rather than unit tests because we will probably change the internal implementation. We can change the code but the end to end test will still work which is what is going to have an impact for developers using Qwik. 

For example one of the most complicated things is content projection, which is when you have a component and you want to project some other part of the DOM inside that component and all sorts of things like removing, adding etc. We can change the implementation of all this internally, but the end to end test gives the same result. The most important parts in Qwik are tested with end to end tests using Playwright which amounts to 90% of total test coverage.

Qwik is also a little different because we want to own the the whole experience end to end. Other frameworks ask you when you want to render something and therefore it's easy to assert that you have rendered a `<div>` a `<span>` or something else. With Qwik it's much more complicated because Qwik wants to own the whole thing end to end and there are service workers involved and web workers involved and a script tag that has to get loaded at the very beginning that you can't really unit test and because of all of these pieces end to end testing is a lot more important.

#### Qwikloader

For example with [Qwikloader](https://qwik.builder.io/docs/advanced/qwikloader/), you can't really put Qwikloader under a unit test because it is tied to how browsers work. So end to end testing for that is kind of the only option you have. We are personally big fans of end to end tests.

#### Starter Templates

Our end to end tests are also the starter templates. So when we check the internals, part of the tests are some of the starter templates that developers will get when they do `npm create qwik`. So the same end to end tests make sure that later when we do a release and a developer does `npm create qwik` and and tries to do `npm run` and everything builds and everything that you see on the website actually works.


## Favourite Features

Playwright is the first testing framework where you feel like you are testing real applications thanks to the [await spec](/docs/actionability). 

#### GitHub Actions

The big value add for us is multiple browsers testing. Getting tests to work across all browsers was huge. And then specifically getting it to work with [GitHub actions](/docs/ci-intro) was so seamless compared to trying to get browser stack to build against Karma that's using Puppeteer that you want to work on Firefox. Previously we were manually trying to figure out how to get all these things to work together. With Playwright we can run it with GitHub actions and test on different platforms for Linux, Mac and Windows all at the same time running the tests in parallel, which was such a big difference and frees up so much time on our end as we don't have to figure all that stuff out.

#### JavaScript Disabled

What Qwik City can do is it allows it to be a single page application, like a dashboard or it can be a multiple page application where there's no JavaScript and so we are able to have an identical end to end test. We just start Playwright in two different ways, [one without JavaScript enabled](/docs/emulation#javascript-enabled), one with it enabled, and the output should be identical. So it's very cool that with Playwright we can have one set of tests but our tests are doubled because of how we use them for both with JavaScript and without JavaScript.

#### Await Expect, Config, Typescript and ESM

Our favourite features are the [await and expect](/docs/test-assertions) and the [config](/docs/test-configuration) and the fact TypeScript and ESM are just built into the core of it. It just works without having to do anything because usually it's always a pain with the common JS versus node version and you are often battling with that. So when it just works with TypeScript and ESM and you're not trying to figure out the different formats, that's nice.

#### Configuration and Start Server

It's super complicated in an API design to hide the right amount of complexity while not looking like magic. The configuration is super nice in the sense that with [one command we can start our server](/docs/test-assertions). We give it what the port number is of the server and Playwright waits on the server to start. With Playwright it just works while with other libraries we remember having to install so many things for it just to wait for the server to begin. So the fact that it's built in without any effort is a big selling point to us. 

Playwright can do a lot of things at the same time but we always know what is going on. It's not like a completely magic tool that works in the perfect case. But then when something doesn't work, it's impossible to figure it out. With playwright we have never had that experience.
